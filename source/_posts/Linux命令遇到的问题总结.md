---
title: Linux命令遇到的问题总结
date: 2018-11-13 14:16:17
categories: Linux笔记
tags:
- linux
---

### 1. root用户和sudo使用root权限的区别：

- 功能：以root的身份执行命令
- 语法：sudo 其他指令
- 用户：被root加入`/etc/sudoers`文件中的用户
- 区别：普通用户使用sudo来执行只有root才能执行权限的命令，跟root用户执行是不一样的，因为这时候他用的还是**普通用户的环境变量**

### 2. linux给用户添加sudo权限：

- linux下直接运行sudo命令，会提示：

  ```
  xxxx is not in the sudoers file.  This incident will be reported.
  ```

  这里，xxxx是用户名称，这条信息表明无法执行sudo命令，解决如下：

  1. 进入超级用户模式。也就是输入`su -` ，系统会让你输入超级用户密码，输入后就进入了超级用户模式。（当然你可以直接使用root登录）
  2. 编辑`/etc/sudoers`文件。也就是输入命令`vim /etc/sudoers`进入编辑模式，找到这一行：`root ALL=(ALL) ALL`在下面添加`xxx ALL=(ALL) ALL`（这里的xxx是你的用户名），然后保存退出即可。
<!--more-->
### 3. linux中`drwxr-xr-x`的意思和权限：

- 读（read），写（write），执行（recute），简写（r，w，x），用数字表示（4，2，1）

  | 权限项   |   读   |   写   |  执行  |   读   |   写   |  执行  |    读    |    写    |   执行   |
  | :------- | :----: | :----: | :----: | :----: | :----: | :----: | :------: | :------: | :------: |
  | 字符表示 |   r    |   w    |   x    |   r    |   w    |   x    |    r     |    w     |    x     |
  | 数字表示 |   4    |   2    |   1    |   4    |   2    |   1    |    4     |    2     |    1     |
  | 权限分配 | 所有者 | 所有者 | 所有者 | 所属组 | 所属组 | 所属组 | 其他用户 | 其他用户 | 其他用户 |

- 举例：

  若某文件的权限为7（4+2+1），则代表可读（4）、可写（2）、可执行（1）。

  若某文件的权限为6（4+2），则表示可读（4）、可写（2）。

  若某文件的权限为5（4+1），则表示可读（4）、可执行（1）。

  若某文件的权限为3（2+1），则表示可写（2）、可执行（1）。

  若没有对文件的任何权限，用数字0表示。



  ```
  [dazhan@iZuf6ic9ggky8lupefuf5xZ etc]$ ll adjtime
  -rw-r--r--.  1 root root       18 Aug 18  2017 adjtime
  ```

  上述命令中，文件所有者为root，所属组root，文件名adjtime，文件权限为644。

  `-rw-r--r--` 第一位代表文件类型：-:普通文件，d:目录文件，l:链接文件，b:设备文件，c:字符设备文件，p:管道文件

- 权限：

  用户权限，就是你自己的权限。英文：user，简写：u

  用户组权限，就是和你同组的人的权限。英文：group，简写：g

  其他权限，就是不和你同组的人的权限。英文：others，简写：o

  chmod 命令是用于改变文件或目录的访问权限。

  `+`表示增加权限，如u+x, u+r, u+w, g+w, g+r, o+r， a+r等

  `-`表示取消权限，如u-x, u-r, u-w, g-w, g-r, o-r， a-r等

  `=`表示赋予给定权限，并取消其他所有权限（如果有的话，如原来u是rwx，设置u=r，u就剩r）

### 4. 修改主机名和是否显示完整的主机名

- 查看当前主机名：hostname

- 主机名保存在`/etc/hostname`文件里，所以只要编辑这个文件即可，将原来的主机名替换为自己想要的主机名。

- 更新`/etc/hosts`文件，因为主机名已经更改，如果不更新这个文件，有的程序不知道如何解析新的主机名，如sudo。将其中的`localhost.localdomain` 修改为新的主机名。

  ```
  127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
  ```

- 修改完成之后重启服务器：reboot

- 重启完成后，假设新的主机名是`example10.201.10.11`，发现没有显示完整的主机名，如下：

  ```
  [dazhan@example10 ~]$
  ```

  如要显示完整的主机名，解决方法如下：

  找到`~/.bashrc`里面的`export PS1="[\u@\h \W]\$ "`这一行，如果没有就添加，只需要将`h`改为`H`，然后保存文件，并使用`source ~/.bashrc`命令使之立即加载生效。

  - 特殊符号的意义：

    `\H`完整的主机名称。例如：我的机器名称为：`example10.201.10.11`，则这个名称就是`example10.201.10.11`

    `\h`仅取主机的第一个名字，如上例，则为`example10`，`.201.10.11`则被省略

    `\w`完整的工作目录名称。家目录会以 `~`代替

    `\W`利用basename取得工作目录名称，所以只会列出最后一个目录

    `\u`当前用户的账号名称

    `\$`提示字符，如果是root时，提示符为：# ，普通用户则为：$
